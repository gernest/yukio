(function(){'use strict';var a=window.location,b=window.document,c=b.currentScript,m=c.getAttribute('data-api')||k(c),l=window.localStorage.yukio_ignore,f=c&&c.getAttribute('data-exclude').split(','),j,i,h;function g(a){console.warn('Ignoring Event: '+a)}function k(a){return new URL(a.src).origin+'/api/event'}function e(j,e){var i,d,h;if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(a.hostname)||a.protocol==='file:')return g('localhost');if(window.phantom||window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)return;if(l=="true")return g('localStorage flag');if(f)for(i=0;i<f.length;i++)if(j=="pageview"&&a.pathname.match(new RegExp('^'+f[i].trim().replace(/\*\*/g,'.*').replace(/([^\.])\*/g,'$1[^\\s/]*')+'/?$')))return g('exclusion rule');d={},d.n=j,d.u=a.href,d.d=c.getAttribute('data-domain'),d.r=b.referrer||null,d.w=window.innerWidth,e&&e.meta&&(d.m=JSON.stringify(e.meta)),e&&e.props&&(d.p=JSON.stringify(e.props)),d.h=1,h=new XMLHttpRequest,h.open('POST',m,!0),h.setRequestHeader('Content-Type','text/plain'),h.send(JSON.stringify(d)),h.onreadystatechange=function(){h.readyState==4&&e&&e.callback&&e.callback()}}function d(){j=a.pathname,e('pageview')}function n(){!j&&b.visibilityState==='visible'&&d()}window.addEventListener('hashchange',d),i=window.yukio&&window.yukio.q||[],window.yukio=e;for(h=0;h<i.length;h++)e.apply(this,i[h]);b.visibilityState==='prerender'?b.addEventListener("visibilitychange",n):d()})()