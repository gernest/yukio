(function(){'use strict';var a=window.location,b=window.document,c=b.currentScript,o=c.getAttribute('data-api')||m(c),q=window.localStorage.yukio_ignore,f=c&&c.getAttribute('data-exclude').split(','),g,e,p,k,j;function h(a){console.warn('Ignoring Event: '+a)}function m(a){return new URL(a.src).origin+'/api/event'}function i(j,d){var i,e,g;if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(a.hostname)||a.protocol==='file:')return h('localhost');if(window.phantom||window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)return;if(q=="true")return h('localStorage flag');if(f)for(i=0;i<f.length;i++)if(j=="pageview"&&a.pathname.match(new RegExp('^'+f[i].trim().replace(/\*\*/g,'.*').replace(/([^\.])\*/g,'$1[^\\s/]*')+'/?$')))return h('exclusion rule');e={},e.n=j,e.u=a.href,e.d=c.getAttribute('data-domain'),e.r=b.referrer||null,e.w=window.innerWidth,d&&d.meta&&(e.m=JSON.stringify(d.meta)),d&&d.props&&(e.p=JSON.stringify(d.props)),g=new XMLHttpRequest,g.open('POST',o,!0),g.setRequestHeader('Content-Type','text/plain'),g.send(JSON.stringify(e)),g.onreadystatechange=function(){g.readyState==4&&d&&d.callback&&d.callback()}}function d(){if(g===a.pathname)return;g=a.pathname,i('pageview')}function r(){!g&&b.visibilityState==='visible'&&d()}function l(c){for(var b=c.target,e=c.type=="auxclick"&&c.which==2,d=c.type=="click";b&&(typeof b.tagName=='undefined'||b.tagName.toLowerCase()!='a'||!b.href);)b=b.parentNode;b&&b.href&&b.host&&b.host!==a.host&&((e||d)&&yukio('Outbound Link: Click',{props:{url:b.href}}),(!b.target||b.target.match(/^_(self|parent|top)$/i))&&!(c.ctrlKey||c.metaKey||c.shiftKey)&&d&&(setTimeout(function(){a.href=b.href},150),c.preventDefault()))}function n(){b.addEventListener('click',l),b.addEventListener('auxclick',l)}e=window.history,e.pushState&&(p=e.pushState,e.pushState=function(){p.apply(this,arguments),d()},window.addEventListener('popstate',d)),n(),k=window.yukio&&window.yukio.q||[],window.yukio=i;for(j=0;j<k.length;j++)i.apply(this,k[j]);b.visibilityState==='prerender'?b.addEventListener("visibilitychange",r):d()})()