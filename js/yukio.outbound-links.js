(function () { 'use strict'; var a = window.location, b = window.document, d = b.currentScript, n = d.getAttribute('data-api') || l(d), p = window.localStorage.yukio_ignore, f, e, o, j, h; function i(a) { console.warn('Ignoring Event: ' + a) } function l(a) { return new URL(a.src).origin + '/api/event' } function g(g, c) { var e, f; if (/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(a.hostname) || a.protocol === 'file:') return i('localhost'); if (window.phantom || window._phantom || window.__nightmare || window.navigator.webdriver || window.Cypress) return; if (p == "true") return i('localStorage flag'); e = {}, e.n = g, e.u = a.href, e.d = d.getAttribute('data-domain'), e.r = b.referrer || null, e.w = window.innerWidth, c && c.meta && (e.m = JSON.stringify(c.meta)), c && c.props && (e.p = JSON.stringify(c.props)), f = new XMLHttpRequest, f.open('POST', n, !0), f.setRequestHeader('Content-Type', 'text/plain'), f.send(JSON.stringify(e)), f.onreadystatechange = function () { f.readyState == 4 && c && c.callback && c.callback() } } function c() { if (f === a.pathname) return; f = a.pathname, g('pageview') } function q() { !f && b.visibilityState === 'visible' && c() } function k(c) { for (var b = c.target, e = c.type == "auxclick" && c.which == 2, d = c.type == "click"; b && (typeof b.tagName == 'undefined' || b.tagName.toLowerCase() != 'a' || !b.href);)b = b.parentNode; b && b.href && b.host && b.host !== a.host && ((e || d) && yukio('Outbound Link: Click', { props: { url: b.href } }), (!b.target || b.target.match(/^_(self|parent|top)$/i)) && !(c.ctrlKey || c.metaKey || c.shiftKey) && d && (setTimeout(function () { a.href = b.href }, 150), c.preventDefault())) } function m() { b.addEventListener('click', k), b.addEventListener('auxclick', k) } e = window.history, e.pushState && (o = e.pushState, e.pushState = function () { o.apply(this, arguments), c() }, window.addEventListener('popstate', c)), m(), j = window.yukio && window.yukio.q || [], window.yukio = g; for (h = 0; h < j.length; h++)g.apply(this, j[h]); b.visibilityState === 'prerender' ? b.addEventListener("visibilitychange", q) : c() })()