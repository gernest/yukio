(function(){'use strict';var a=window.location,b=window.document,d=b.currentScript,m=d.getAttribute('data-api')||o(d),k=window.localStorage.yukio_ignore,f,e,n,j,h;function i(a){console.warn('Ignoring Event: '+a)}function o(a){return new URL(a.src).origin+'/api/event'}function g(g,c){var e,f;if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(a.hostname)||a.protocol==='file:')return i('localhost');if(window.phantom||window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)return;if(k=="true")return i('localStorage flag');e={},e.n=g,e.u=a.href,e.d=d.getAttribute('data-domain'),e.r=b.referrer||null,e.w=window.innerWidth,c&&c.meta&&(e.m=JSON.stringify(c.meta)),c&&c.props&&(e.p=JSON.stringify(c.props)),f=new XMLHttpRequest,f.open('POST',m,!0),f.setRequestHeader('Content-Type','text/plain'),f.send(JSON.stringify(e)),f.onreadystatechange=function(){f.readyState==4&&c&&c.callback&&c.callback()}}function c(){if(f===a.pathname)return;f=a.pathname,g('pageview')}function l(){!f&&b.visibilityState==='visible'&&c()}e=window.history,e.pushState&&(n=e.pushState,e.pushState=function(){n.apply(this,arguments),c()},window.addEventListener('popstate',c)),j=window.yukio&&window.yukio.q||[],window.yukio=g;for(h=0;h<j.length;h++)g.apply(this,j[h]);b.visibilityState==='prerender'?b.addEventListener("visibilitychange",l):c()})()