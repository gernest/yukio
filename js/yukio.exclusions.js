(function(){'use strict';var a=window.location,b=window.document,c=b.currentScript,n=c.getAttribute('data-api')||p(c),l=window.localStorage.yukio_ignore,g=c&&c.getAttribute('data-exclude').split(','),h,f,o,k,j;function i(a){console.warn('Ignoring Event: '+a)}function p(a){return new URL(a.src).origin+'/api/event'}function e(j,d){var h,e,f;if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(a.hostname)||a.protocol==='file:')return i('localhost');if(window.phantom||window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)return;if(l=="true")return i('localStorage flag');if(g)for(h=0;h<g.length;h++)if(j=="pageview"&&a.pathname.match(new RegExp('^'+g[h].trim().replace(/\*\*/g,'.*').replace(/([^\.])\*/g,'$1[^\\s/]*')+'/?$')))return i('exclusion rule');e={},e.n=j,e.u=a.href,e.d=c.getAttribute('data-domain'),e.r=b.referrer||null,e.w=window.innerWidth,d&&d.meta&&(e.m=JSON.stringify(d.meta)),d&&d.props&&(e.p=JSON.stringify(d.props)),f=new XMLHttpRequest,f.open('POST',n,!0),f.setRequestHeader('Content-Type','text/plain'),f.send(JSON.stringify(e)),f.onreadystatechange=function(){f.readyState==4&&d&&d.callback&&d.callback()}}function d(){if(h===a.pathname)return;h=a.pathname,e('pageview')}function m(){!h&&b.visibilityState==='visible'&&d()}f=window.history,f.pushState&&(o=f.pushState,f.pushState=function(){o.apply(this,arguments),d()},window.addEventListener('popstate',d)),k=window.yukio&&window.yukio.q||[],window.yukio=e;for(j=0;j<k.length;j++)e.apply(this,k[j]);b.visibilityState==='prerender'?b.addEventListener("visibilitychange",m):d()})()